<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8">
    <title>Lab01</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.7/vega.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.1/vega-lite.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-embed/3.0.0-rc7/vega-embed.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>

<body>
<div class="container">
    <div class="row">
        <h2>Lab01</h2>
    </div>
    <div class="row mychart" id="chart">
    </div>
</div>

<script type="text/javascript">


<script>
    const spec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
        "data": {
            "url": "https://api.insa.gov.br/reservatorios/12172/monitoramento",
            "format": {
                "type": "json",
                "property": "volumes",
                "parse": {
                    "DataInformacao": "utc:'%d/%m/%Y'"
                }
            }
        },

        "width": 500,
        "height": 120,

        "mark": "bar",
        "encoding": {
            "x": {"field": "DataInformacao", "type": "temporal"
                ,"axis": {"title": "Data"
                }
            },
            "y": {"field": "VolumePercentual", "type": "quantitative",
                "axis": {"title": "Volume Percentual da água"}
            }
        }
    };
    vegaEmbed('#vis', spec).catch(console.warn);
</script>

<div id="visOutra" width=350></div>
<script>
    const spec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
        "data": {
            "url": "https://api.insa.gov.br/reservatorios/12172/monitoramento",
            "format": {
                "type": "json",
                "property": "volumes",
                "parse": {
                    "DataInformacao": "utc:'%d/%m/%Y'"
                }
            }
        },

        "transform":[
            {"filter": {"timeUnit": "year", "field": "DataInformacao",  "range": [2013,2016]}}],

        "mark": "line",
        "encoding": {
            "x": {
                "field": "DataInformacao", "type": "temporal"
                , "axis": {
                    "title": "Mês"
                }
            },
            "y": {
                "field": "VolumePercentual", "type": "quantitative",
                "axis": {"title": "Volume Percentual da água"}
            },
            "color": {"timeUnit": "month", "field": "DataInformacao", "type": "nominal"}


        },



        "transform":[
            {"filter": {"field": "DataInformacao", "range": [{"year": 2014, "month": "jan", "date": 1}, {"year": 2014, "month": "dec", "date": 30}] }}],

        "mark": "line",
        "encoding": {
            "x": {"field": "DataInformacao", "type": "temporal"
                ,"axis": {"title": "Data"
                }
            },
            "y": {"field": "VolumePercentual", "type": "quantitative",
                "axis": {"title": "Volume Percentual da água"}
            }

        }
    };
    vegaEmbed('#vis', spec).catch(console.warn);

     </script>


</body>

</html>
